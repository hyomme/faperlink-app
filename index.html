<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faperlink 2025 디자인 아웃소싱 종합 정보 인포그래픽</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #F9FAFB; color: #374151; }
        .main-container { max-width: 1400px; background-color: #FFFFFF; margin: 2rem auto; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); border-radius: 1rem; }
        .section-title { font-size: 2.25rem; font-weight: 900; color: #1A2F4A; margin-bottom: 0.5rem; position: relative; padding-bottom: 0.75rem; }
        .section-title::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 80px; height: 4px; background-color: #2C405C; border-radius: 2px; }
        .section-subtitle { color: #6B7280; max-width: 700px; margin-left: auto; margin-right: auto; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin: auto; height: 400px; max-height: 50vh; }
        @media (max-width: 768px) { .chart-container { height: 350px; max-height: 60vh; } }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { border: 1px solid #E5E7EB; padding: 0.75rem 1rem; text-align: left; vertical-align: middle; }
        th { background-color: #F3F4F6; font-weight: 700; color: #1A2F4A; }
        .info-card { background-color: #FFFFFF; border-radius: 0.75rem; border: 1px solid #E5E7EB; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -1px rgba(0,0,0,0.03); transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column; }
        .info-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .icon-large { font-size: 2.25rem; color: #2C405C; }
        .card-content-wrapper { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .editable-price-input { width: 90px; padding: 4px 6px; border: 1px solid #2C405C; border-radius: 4px; font-size: 0.875rem; text-align: right; background-color: #fff; box-shadow: 0 0 5px rgba(44, 64, 92, 0.3); }
        .calculator-input { width: 60px; padding: 0.25rem 0.5rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; text-align: center; transition: border-color 0.2s, box-shadow 0.2s; }
        .calculator-input:focus { outline: none; border-color: #2C405C; box-shadow: 0 0 0 2px rgba(44, 64, 92, 0.2); }
        #order-list-table th, #order-list-table td { padding: 0.75rem; font-size: 0.875rem; user-select: none; }
        .edit-cost-btn { background: none; border: none; cursor: pointer; color: #9CA3AF; transition: color 0.2s; margin-left: 6px; }
        .edit-cost-btn:hover { color: #1A2F4A; }
    </style>
</head>
<body class="bg-gray-50">

    <div class="main-container p-6 md:p-12">
        <header class="text-center mb-16 md:mb-24">
            <h1 class="text-4xl md:text-5xl font-black text-[#1A2F4A] mb-3 leading-tight uppercase tracking-wide">Faperlink 2025</h1>
            <p class="text-lg md:text-xl text-gray-500 font-medium">디자인 아웃소싱 종합 서비스 및 가격 체계</p>
        </header>
        
        <main class="space-y-20 md:space-y-28">
            <section id="design-pricing-overview"></section>
            
            <section id="price-comparison-chart-section"></section>

             <section id="service-versions-personnel">
                <div class="text-center mb-12">
                     <h2 class="section-title">서비스 타입 및 인력 구성</h2>
                     <p class="section-subtitle mt-4">프로젝트 진행 방식과 투입 인력에 따라 '기획'과 '디자인' 서비스를 선택할 수 있습니다.</p>
                </div>

                <!-- Planning Services -->
                <div class="mb-16">
                    <h3 class="text-2xl font-bold text-[#1A2F4A] mb-6 flex items-center gap-4"><i class="fas fa-lightbulb text-3xl text-yellow-400"></i>기획 서비스 (PLANNING)</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="info-card p-6 text-center">
                            <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-file-alt icon-large text-gray-400"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">간편 기획</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Simple Planning</p><p class="text-sm text-gray-500 h-10">패퍼링크 템플릿으로<br>고객사 직접 제작</p></div>
                                <div class="mt-4"><span class="text-xl font-bold text-green-600">무료</span></div>
                            </div>
                        </div>
                        <div class="info-card p-6 text-center">
                             <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-user-tie icon-large text-blue-500"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">전문 기획</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Professional Planning</p><p class="text-sm text-gray-500 h-10">약식 디자인 가이드 제작</p><p class="text-xs text-gray-400 mt-2">10~15년차 서브 디렉터</p></div>
                                <div class="mt-4"><div class="text-lg font-bold text-[#2C405C]"><span data-cost-key="planning.pro.min"></span> ~ <span data-cost-key="planning.pro.max"></span></div></div>
                            </div>
                        </div>
                        <div class="info-card p-6 text-center">
                            <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-users icon-large text-blue-700"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">마스터 기획</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Master Planning</p><p class="text-sm text-gray-500 h-10">약식 디자인 가이드 강화</p><p class="text-xs text-gray-400 mt-2">20~25년차 메인 디렉터 + 2인팀</p></div>
                                <div class="mt-4"><div class="text-lg font-bold text-[#1A2F4A]"><span data-cost-key="planning.master.min"></span> ~ <span data-cost-key="planning.master.max"></span></div></div>
                            </div>
                        </div>
                         <div class="info-card p-6 text-center">
                            <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-sitemap icon-large text-gray-600"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">맞춤형 기획</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Custom Planning</p><p class="text-sm text-gray-500 h-10">풀스택 디자인/시즌 기획</p><p class="text-xs text-gray-400 mt-2">2~3인 이상 팀 단위</p></div>
                                <div class="mt-4"><span class="text-lg font-bold text-gray-700">별도 문의</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Design Services -->
                <div>
                    <h3 class="text-2xl font-bold text-[#1A2F4A] mb-6 flex items-center gap-4"><i class="fas fa-palette text-3xl text-purple-500"></i>디자인 서비스 (DESIGN)</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="info-card p-6 text-center">
                            <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-bolt icon-large text-gray-400"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">신속 디자인</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Express Design</p><p class="text-sm text-gray-500 h-10">수정형 위주, 빠른 개발</p><p class="text-xs text-gray-400 mt-2">PC 1명</p></div>
                                <div class="mt-4"><span class="text-lg font-bold text-gray-700">PC비 + 디자인비</span></div>
                             </div>
                        </div>
                        <div class="info-card p-6 text-center">
                            <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-user-cog icon-large text-indigo-500"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">협업 디자인</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Collaborative Design</p><p class="text-sm text-gray-500 h-10">약식 가이드 기반 팀빌딩</p><p class="text-xs text-gray-400 mt-2">PC 1명 + PM(고객사)</p></div>
                                <div class="mt-4"><span class="text-lg font-bold text-[#2C405C]">PC비 + 디자인비</span></div>
                            </div>
                        </div>
                        <div class="info-card p-6 text-center">
                             <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-users-cog icon-large text-indigo-700"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">풀아웃소싱</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Full-Outsourcing</p><p class="text-sm text-gray-500 h-10">외부 디자인실 구성</p><p class="text-xs text-gray-400 mt-2">PC 1명 + PM 1명</p></div>
                                <div class="mt-4"><span class="text-lg font-bold text-[#1A2F4A]">PC/PM비 + 디자인비</span></div>
                            </div>
                        </div>
                        <div class="info-card p-6 text-center">
                            <div class="card-content-wrapper">
                                <div class="mb-4"><i class="fa-solid fa-drafting-compass icon-large text-gray-600"></i></div>
                                <div class="min-h-[140px]"><h4 class="text-xl font-bold text-gray-800 mb-1">맞춤형 디자인</h4><p class="text-xs text-gray-400 uppercase tracking-wider mb-2">Custom Design</p><p class="text-sm text-gray-500 h-10">프로젝트 맞춤 팀 구성</p><p class="text-xs text-gray-400 mt-2">팀 단위</p></div>
                                <div class="mt-4"><span class="text-lg font-bold text-gray-700">별도 문의</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="design-service-details"></section>
            
            <section id="quote-calculator"></section>
            
            <section id="key-takeaways"></section>
        </main>
        
        <footer class="text-center mt-16 py-8 border-t">
            <p class="text-gray-500 text-sm">© 2025 Faperlink Inc. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const pricingData = {
            categories: ['다이마루', '셔츠/팬츠/스커트', '원피스', '아우터', '헤비아우터', '패딩 및 특종', '데님/니트'],
            personal: [120000, 170000, 220000, 250000, 350000, 400000, 300000],
            edit: [80000, 120000, 150000, 180000, 250000, 300000, 220000],
            commissionRate: 0.20,
            managementCosts: {
                planning: {
                    simple: {min: 0, max: 0 },
                    pro: { min: 1500000, max: 2000000 },
                    master: { min: 3000000, max: 5000000 }
                },
                pc: {
                    express: 250000, 
                    collaborative: 500000,
                },
                pm: {
                    fullOutsource: 1500000 
                }
            }
        };
        let orderList = [];
        let charts = {};

        const formatCurrency = (value, unit = '원') => new Intl.NumberFormat('ko-KR').format(Math.round(value)) + unit;
        const parseCurrency = (text) => Number(String(text).replace(/[^\d]/g, ''));
        const getNestedValue = (obj, path) => path.split('.').reduce((acc, part) => acc && acc[part], obj);
        const setNestedValue = (obj, path, value) => {
            const keys = path.split('.');
            keys.slice(0, -1).reduce((acc, part) => acc[part], obj)[keys.slice(-1)] = value;
        };
        
        // --- DYNAMIC CONTENT RENDERERS ---
        function renderAllStaticContent() {
            document.getElementById('design-pricing-overview').innerHTML = `<div class="text-center mb-12"><h2 class="section-title">디자인 방식별 가격 체계</h2><p class="section-subtitle mt-4">디자인 작업의 종류(제안형 또는 수정형)에 따른 복종별 기본 비용을 안내합니다. 모든 공급가는 Faperlink 수수료 20%를 포함합니다.</p></div><div class="grid grid-cols-1 xl:grid-cols-2 gap-8"><div class="bg-gray-50/50 rounded-xl p-6 md:p-8 border"><h3 class="text-2xl font-bold text-[#2C405C] mb-4">Ref.personal (제안형)</h3><p class="text-sm text-gray-500 mb-4">트렌드 기반 기획 및 스타일 제안 포함</p><div class="overflow-x-auto"><table id="personal-price-table" class="bg-white"><thead><tr><th>복종 구분</th><th>공급가</th><th>수수료(20%)</th><th>정산액(80%)</th><th>수정</th></tr></thead><tbody></tbody></table></div></div><div class="bg-gray-50/50 rounded-xl p-6 md:p-8 border"><h3 class="text-2xl font-bold text-[#2C405C] mb-4">Ref.edit (수정형)</h3><p class="text-sm text-gray-500 mb-4">브랜드 제공 기준안 또는 샘플 기반 수정</p><div class="overflow-x-auto"><table id="edit-price-table" class="bg-white"><thead><tr><th>복종 구분</th><th>공급가</th><th>수수료(20%)</th><th>정산액(80%)</th><th>수정</th></tr></thead><tbody></tbody></table></div></div></div>`;
            document.getElementById('price-comparison-chart-section').innerHTML = `<div class="text-center mb-12"><h2 class="section-title">서비스 유형별 공급가 비교</h2><p class="section-subtitle mt-4">Ref.personal (제안형)과 Ref.edit (수정형) 서비스의 복종별 최종 공급가를 차트로 비교합니다.</p></div><div class="bg-gray-50/50 rounded-xl p-6 md:p-8 border"><div class="chart-container"><canvas id="groupedBarChart"></canvas></div></div>`;
            document.getElementById('design-service-details').innerHTML = `<div class="text-center mb-12"><h2 class="section-title">디자인 서비스 상세 내용</h2><p class="section-subtitle mt-4">각 디자인 서비스 버전별 상세 설명, 인력 구성, 비용 및 주요 타겟 고객 정보를 확인하세요.</p></div><div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="info-card p-6"><h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">신속 디자인</h3><ul class="text-sm space-y-3 text-gray-600"><li><strong class="font-semibold text-gray-700">설명:</strong> 디자인 가이드 없이 수정형 위주로 빠른 샘플링 및 생산을 통해 개발 리소스를 최소화합니다.</li><li><strong class="font-semibold text-gray-700">인원:</strong> PC (프로젝트 컨트롤러) 1명</li><li><strong class="font-semibold text-gray-700">비용:</strong> PC 5스타일당 <span data-cost-key="pc.express"></span> + 디자인 비용 별도</li><li><strong class="font-semibold text-gray-700">타겟:</strong> 도소매 업체, 자체 제작 쇼핑몰 등</li></ul></div><div class="info-card p-6"><h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">협업 디자인</h3><ul class="text-sm space-y-3 text-gray-600"><li><strong class="font-semibold text-gray-700">설명:</strong> 약식 이상의 디자인 가이드가 필수적이며, PM은 고객사 실무진이 담당하는 팀빌딩 서비스입니다.</li><li><strong class="font-semibold text-gray-700">인원:</strong> PC 1명 + PM(고객사)</li><li><strong class="font-semibold text-gray-700">비용:</strong> PC 10스타일당 <span data-cost-key="pc.collaborative"></span> + 디자인 비용 별도</li><li><strong class="font-semibold text-gray-700">타겟:</strong> 인하우스 디렉터/디자인 실장이 있는 경우</li></ul></div><div class="info-card p-6"><h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">풀아웃소싱 디자인</h3><ul class="text-sm space-y-3 text-gray-600"><li><strong class="font-semibold text-gray-700">설명:</strong> 15~25년차의 실장/이사급 PM을 포함한 외부 디자인실을 구성하는 풀케어 서비스입니다.</li><li><strong class="font-semibold text-gray-700">인원:</strong> PC 1명 + PM(실장/이사급) 1명</li><li><strong class="font-semibold text-gray-700">비용:</strong> PC 10스타일당 <span data-cost-key="pc.collaborative" class="font-bold"></span> + PM 10스타일당 <span data-cost-key="pm.fullOutsource" class="font-bold"></span> + 디자인 비용 별도</li><li><strong class="font-semibold text-gray-700">타겟:</strong> 디자이너 인력 부재 및 라인 확장 등이 필요한 경우</li></ul></div></div>`;
            document.getElementById('quote-calculator').innerHTML = `<div class="text-center mb-12"><h2 class="section-title">모의 견적 계산기</h2><p class="section-subtitle mt-4">원하는 서비스 조합과 복종별 스타일 수량을 추가하여 예상 공급가를 미리 계산해 보세요.</p></div><div class="bg-gray-50/50 rounded-xl shadow-inner p-6 md:p-10 border"><form id="calculator-form"><div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"><div><label for="planningService" class="block text-lg font-bold text-gray-700 mb-2">1. 기획 서비스 선택</label><select id="planningService" class="w-full p-3 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2C405C] transition"><option value="simple">간편 기획 (무료)</option><option value="pro">전문 기획</option><option value="master">마스터 기획</option><option value="custom">맞춤형 기획 (별도 문의)</option></select></div><div><label for="designService" class="block text-lg font-bold text-gray-700 mb-2">2. 디자인 서비스 선택</label><select id="designService" class="w-full p-3 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2C405C] transition disabled:bg-gray-200"></select></div></div><h3 class="text-lg font-bold text-gray-700 mb-3">3. 디자인 스타일 추가</h3><div class="grid grid-cols-1 lg:grid-cols-2 gap-8 p-4 bg-white rounded-lg border"><div id="personal-style-inputs" class="space-y-3 pt-2"></div><div id="edit-style-inputs" class="space-y-3 pt-2"></div></div><div id="order-list-section" class="mt-10"><h3 class="text-lg font-bold text-gray-700 mb-3">4. 견적 내역</h3><div id="order-list-container" class="bg-white p-4 rounded-lg shadow-inner min-h-[80px] border"><table id="order-list-table" class="w-full"><thead class="hidden border-b"><tr><th>구분</th><th>항목</th><th>수량</th><th>단가</th><th>소계</th><th></th></tr></thead><tbody></tbody></table><p id="order-list-placeholder" class="text-center text-gray-400 py-4">견적에 추가할 스타일을 선택해주세요.</p></div></div><div class="mt-12 pt-8 border-t-2 border-dashed"><h3 class="text-2xl font-bold text-center text-[#1A2F4A] mb-4">예상 총 공급가</h3><div id="quoteResult" class="text-center text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-[#2C405C] to-[#1A2F4A] p-4">0원</div><p id="quoteBreakdown" class="text-center text-gray-500 mt-1 text-sm h-4"></p></div></form></div>`;
            document.getElementById('key-takeaways').innerHTML = `<div class="text-center mb-12"><h2 class="section-title">주요 참고사항</h2></div><div class="max-w-4xl mx-auto bg-gray-50/50 rounded-xl p-6 md:p-8 border"><ul class="space-y-4"><li><span class="text-[#1A2F4A] font-bold text-xl mr-2">✓</span><h4 class="inline font-bold text-gray-800">수수료 정책</h4><p class="text-gray-600 text-sm ml-6">모든 공급가에는 Faperlink 플랫폼 수수료 20%가 포함되어 있으며, 디자이너는 공급가의 80%를 정산받습니다.</p></li><li><span class="text-[#1A2F4A] font-bold text-xl mr-2">✓</span><h4 class="inline font-bold text-gray-800">가격 변동성</h4><p class="text-gray-600 text-sm ml-6">제시된 가격은 표준 기준이며, 디자인의 복잡성, 소재, 추가 요청사항 등에 따라 변동될 수 있습니다. 비용 옆 <i class="fa-solid fa-pen text-xs"></i> 버튼으로 가격을 직접 수정하여 시뮬레이션할 수 있습니다.</p></li><li><span class="text-[#1A2F4A] font-bold text-xl mr-2">✓</span><h4 class="inline font-bold text-gray-800">프로젝트 관리(PC/PM) 비용</h4><p class="text-gray-600 text-sm ml-6">'디자인 서비스'의 비용은 프로젝트 관리(PC/PM) 비용과 순수 디자인 비용(복종별 단가)의 합산으로 구성됩니다.</p></li><li><span class="text-[#1A2F4A] font-bold text-xl mr-2">✓</span><h4 class="inline font-bold text-gray-800">VAT 별도</h4><p class="text-gray-600 text-sm ml-6">모든 견적 금액은 부가세(VAT) 별도입니다.</p></li></ul></div>`;
        }

        function renderManagementCosts() {
            document.querySelectorAll('[data-cost-key]').forEach(el => {
                const key = el.dataset.costKey;
                const value = getNestedValue(pricingData.managementCosts, key);
                const isPlanning = key.includes('planning');
                let formattedValue = isPlanning ? formatCurrency(value, '만원').replace('원', '') : formatCurrency(value);
                el.innerHTML = `${formattedValue}<button class="edit-cost-btn" type="button"><i class="fa-solid fa-pen"></i></button>`;
            });
        }
        
        function renderPriceTable(tableId, prices, type) {
            const tbody = document.getElementById(tableId).querySelector('tbody');
            tbody.innerHTML = '';
            prices.forEach((price, index) => {
                const commission = price * pricingData.commissionRate;
                const designerShare = price - commission;
                const row = `<tr data-type="${type}" data-index="${index}"><td>${pricingData.categories[index]}</td><td data-price-type="supply">${formatCurrency(price)}</td><td class="text-gray-500">${formatCurrency(commission)}</td><td class="font-semibold text-gray-800">${formatCurrency(designerShare)}</td><td><button type="button" class="edit-price-btn text-gray-400 hover:text-[#1A2F4A]"><i class="fa-solid fa-pen"></i></button></td></tr>`;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        }

        function createCharts() { 
            if (charts.groupedBar) charts.groupedBar.destroy();
            charts.groupedBar = new Chart(document.getElementById('groupedBarChart'), { type: 'bar', data: { labels: pricingData.categories, datasets: [{ label: 'Ref.personal (제안형)', data: pricingData.personal, backgroundColor: 'rgba(44, 64, 92, 0.8)' }, { label: 'Ref.edit (수정형)', data: pricingData.edit, backgroundColor: 'rgba(160, 174, 192, 0.8)' }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, ticks: { callback: value => value / 10000 + '만 원' } } }, plugins: { legend: { position: 'top', labels: {font: { family: "'Noto Sans KR', sans-serif" }} } } } }); 
        }

        function renderCalculatorInputs() {
            const pContainer = document.getElementById('personal-style-inputs');
            const eContainer = document.getElementById('edit-style-inputs');
            pContainer.innerHTML = '<h4 class="font-bold text-center text-lg text-[#2C405C] mb-2">Ref.personal (제안형)</h4>';
            eContainer.innerHTML = '<h4 class="font-bold text-center text-lg text-gray-500 mb-2">Ref.edit (수정형)</h4>';
            pricingData.categories.forEach((cat, idx) => {
                const html = (type) => `<div class="flex justify-between items-center gap-2"><label for="${type}-cat-${idx}" class="text-sm text-gray-700 flex-1">${cat}</label><input type="number" id="${type}-cat-qty-${idx}" value="1" min="1" class="calculator-input w-16"><button type="button" class="add-item-btn text-white bg-[#2C405C] hover:bg-[#1A2F4A] rounded-md px-3 py-1 text-xs" data-type="${type}" data-index="${idx}">추가</button></div>`;
                pContainer.insertAdjacentHTML('beforeend', html('personal'));
                eContainer.insertAdjacentHTML('beforeend', html('edit'));
            });
        }
        function renderOrderList() {
            const tbody = document.getElementById('order-list-table').querySelector('tbody');
            tbody.innerHTML = '';
            document.getElementById('order-list-table').querySelector('thead').classList.toggle('hidden', orderList.length === 0);
            document.getElementById('order-list-placeholder').classList.toggle('hidden', orderList.length > 0);
            orderList.forEach((item, listIndex) => {
                const subtotal = item.quantity * item.price;
                const row = `<tr class="border-b last:border-b-0"><td class="text-xs ${item.type === 'personal' ? 'text-[#1A2F4A]' : 'text-gray-500'}">${item.type === 'personal' ? '제안형' : '수정형'}</td><td>${item.name}</td><td>${item.quantity}</td><td>${formatCurrency(item.price)}</td><td class="font-semibold">${formatCurrency(subtotal)}</td><td><button type="button" class="remove-item-btn text-red-400" data-list-index="${listIndex}"><i class="fas fa-times-circle"></i></button></td></tr>`;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        }
        
        function updateAllUI() {
            renderPriceTable('personal-price-table', pricingData.personal, 'personal');
            renderPriceTable('edit-price-table', pricingData.edit, 'edit');
            createCharts();
            renderOrderList();
            renderManagementCosts();
            calculateQuote();
        }

        // --- EVENT HANDLERS ---
        function handleAddItem(button) { 
            const type = button.dataset.type;
            const index = parseInt(button.dataset.index); 
            const quantityInput = document.getElementById(`${type}-cat-qty-${index}`);
            const quantity = parseInt(quantityInput.value, 10); 
            if(isNaN(quantity) || quantity <= 0) return;
            orderList.push({ name: pricingData.categories[index], type, quantity, price: pricingData[type][index] });
            quantityInput.value = 1; 
            updateAllUI(); 
        }
        function handleRemoveItem(button) { 
            orderList.splice(parseInt(button.dataset.listIndex), 1);
            updateAllUI(); 
        }
        function handleEditClick(button) {
            const row = button.closest('tr'); const supplyCell = row.querySelector('td[data-price-type="supply"]'); if (supplyCell.querySelector('input')) return; const currentPrice = parseCurrency(supplyCell.textContent); supplyCell.innerHTML = `<input type="text" value="${currentPrice}" class="editable-price-input">`; const input = supplyCell.querySelector('input'); input.focus(); input.select(); const saveHandler = () => { const type = row.dataset.type; const index = parseInt(row.dataset.index, 10); let newPrice = parseInt(input.value, 10); if (isNaN(newPrice) || newPrice < 0) newPrice = pricingData[type][index]; pricingData[type][index] = newPrice; orderList.forEach(item => { if (item.name === pricingData.categories[index] && item.type === type) item.price = newPrice; }); updateAllUI(); }; input.addEventListener('blur', saveHandler); input.addEventListener('keydown', (ev) => { if (ev.key === 'Enter') ev.target.blur(); });
        }
        function handleCostEditClick(button) {
            const span = button.parentElement;
            const key = span.dataset.costKey;
            if (span.querySelector('input')) return;
            const currentValue = getNestedValue(pricingData.managementCosts, key);
            const isPlanning = key.includes('planning');
            const displayValue = isPlanning ? currentValue / 10000 : currentValue;

            span.innerHTML = `<input type="text" value="${displayValue}" class="editable-price-input" style="width: 70px; font-size: 1em;">`;
            const input = span.querySelector('input'); input.focus(); input.select();
            const saveHandler = () => {
                let newRawValue = parseInt(input.value.replace(/,/g, ''), 10);
                if (isNaN(newRawValue) || newRawValue < 0) newRawValue = isPlanning ? getNestedValue(pricingData.managementCosts, key) / 10000 : getNestedValue(pricingData.managementCosts, key);
                const finalValue = isPlanning ? newRawValue * 10000 : newRawValue;
                setNestedValue(pricingData.managementCosts, key, finalValue);
                updateAllUI();
            };
            input.addEventListener('blur', saveHandler);
            input.addEventListener('keydown', (ev) => { if (ev.key === 'Enter') ev.target.blur(); });
        }
        function handlePlanningServiceChange() {
            const planningService = document.getElementById('planningService').value;
            const designSelect = document.getElementById('designService');
            const options = {
                express: '<option value="express">신속 디자인</option>',
                collaborative: '<option value="collaborative">협업 디자인</option>',
                full: '<option value="full-outsource">풀아웃소싱 디자인</option>',
                custom: '<option value="custom">맞춤형 디자인 (별도 문의)</option>'
            };
            
            designSelect.disabled = false;
            if (planningService === 'simple') {
                designSelect.innerHTML = options.express;
            } else if (planningService === 'pro' || planningService === 'master') {
                designSelect.innerHTML = options.collaborative + options.full;
            } else { // custom
                designSelect.innerHTML = options.custom;
                designSelect.disabled = true;
            }
            calculateQuote();
        }

        function calculateQuote() {
            const resultEl = document.getElementById('quoteResult'); const breakdownEl = document.getElementById('quoteBreakdown'); const planningKey = document.getElementById('planningService').value; const designService = document.getElementById('designService').value; let minCost = 0, maxCost = 0, breakdown = []; const { managementCosts } = pricingData;
            if (planningKey === 'custom') { resultEl.textContent = "별도 문의"; breakdownEl.textContent = "맞춤형 기획/디자인 서비스는 별도 문의 바랍니다."; return; }
            if (planningKey !== 'none') { const cost = managementCosts.planning[planningKey]; minCost += cost.min; maxCost += cost.max; if (cost.min > 0) breakdown.push('기획비'); }
            const designCost = orderList.reduce((sum, item) => sum + (item.quantity * item.price), 0); minCost += designCost; maxCost += designCost; if (designCost > 0) breakdown.push('디자인비');
            const totalStyles = orderList.reduce((sum, item) => sum + item.quantity, 0); let mgmtCost = 0;
            if (totalStyles > 0 && designService !== 'none' && designService !== 'custom') { if (designService === 'express') { mgmtCost = Math.ceil(totalStyles / 5) * managementCosts.pc.express; } else if (designService === 'collaborative') { mgmtCost = Math.ceil(totalStyles / 10) * managementCosts.pc.collaborative; } else if (designService === 'full-outsource') { const blocks = Math.ceil(totalStyles / 10); mgmtCost = (blocks * managementCosts.pc.collaborative) + (blocks * managementCosts.pm.fullOutsource); } }
            minCost += mgmtCost; maxCost += mgmtCost; if (mgmtCost > 0) breakdown.push('관리비(PC/PM)');
            if (minCost === 0 && maxCost === 0) { resultEl.textContent = "0원"; breakdownEl.textContent = "서비스를 선택하고 스타일을 추가해주세요."; } else if (minCost === maxCost) { resultEl.textContent = formatCurrency(minCost); } else { resultEl.textContent = `${formatCurrency(minCost)} ~ ${formatCurrency(maxCost)}`; }
            breakdownEl.textContent = breakdown.length > 0 ? `*견적 포함 항목: ${breakdown.join(' + ')}` : "";
        }
        
        // --- EVENT ATTACHMENT ---
        function attachAllEventListeners() {
            document.body.addEventListener('click', e => {
                const editBtn = e.target.closest('.edit-price-btn');
                const costEditBtn = e.target.closest('.edit-cost-btn');
                const addBtn = e.target.closest('.add-item-btn');
                const removeBtn = e.target.closest('.remove-item-btn');

                if (editBtn) { e.preventDefault(); handleEditClick(editBtn); }
                if (costEditBtn) { e.preventDefault(); handleCostEditClick(costEditBtn); }
                if (addBtn) { e.preventDefault(); handleAddItem(addBtn); }
                if (removeBtn) { e.preventDefault(); handleRemoveItem(removeBtn); }
            });
            document.getElementById('planningService').addEventListener('change', handlePlanningServiceChange);
            document.getElementById('designService').addEventListener('change', calculateQuote);
        }

        // --- INITIALIZATION ---
        renderAllStaticContent();
        renderCalculatorInputs();
        attachAllEventListeners();
        updateAllUI(); 
        handlePlanningServiceChange();
    });
    </script>
</body>
</html>